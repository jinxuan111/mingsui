<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…«å­—ç®—å‘½å¤§å¸ˆ - ä¸“ä¸šè¿åŠ¿é¢„æµ‹ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
            animation: fadeInDown 0.6s ease;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 18px;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
            align-items: start;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideInLeft 0.6s ease;
        }

        .result-panel {
            animation: slideInRight 0.6s ease;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #555;
            font-size: 15px;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        .result-hidden {
            display: none;
        }

        .result-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .result-card h3 {
            color: #667eea;
            font-size: 20px;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .bazi-display {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            line-height: 1.8;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
        }

        .wuxing-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .wuxing-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
        }

        .wuxing-wood { background-color: #4CAF50; }
        .wuxing-fire { background-color: #FF6B6B; }
        .wuxing-earth { background-color: #D4A574; }
        .wuxing-metal { background-color: #FFD700; color: #333; }
        .wuxing-water { background-color: #2196F3; }

        .wuxing-count {
            font-size: 24px;
            margin-top: 5px;
        }

        .fortune-bar-container {
            margin-bottom: 20px;
        }

        .fortune-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .fortune-bar {
            width: 100%;
            height: 8px;
            background-color: #E0E0E0;
            border-radius: 4px;
            overflow: hidden;
        }

        .fortune-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.6s ease;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        .analysis-text {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.8;
            color: #555;
            font-size: 14px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            color: #666;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: none;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-btn:hover {
            color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .stat-label {
            font-weight: 600;
            color: #555;
        }

        .stat-value {
            color: #667eea;
            font-weight: bold;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 36px;
            }

            .wuxing-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âœ¨ å…«å­—ç®—å‘½å¤§å¸ˆ âœ¨</h1>
            <p class="subtitle">æ ¹æ®ä½ çš„å‡ºç”Ÿæ—¥æœŸé¢„æµ‹ä»Šå¤©çš„è¿åŠ¿ã€è´¢è¿å’Œå‰è·¯</p>
        </header>

        <div class="main-content">
            <!-- è¾“å…¥é¢æ¿ -->
            <div class="panel">
                <h2 style="margin-top: 0; color: #333; font-size: 24px; margin-bottom: 30px;">
                    ğŸ“ è¾“å…¥ä½ çš„ä¿¡æ¯
                </h2>

                <div class="form-group">
                    <label>ğŸ‚ å‡ºç”Ÿå¹´ä»½</label>
                    <input type="number" id="year" min="1900" max="2024" value="2000">
                </div>

                <div class="form-group">
                    <label>ğŸ“… å‡ºç”Ÿæœˆä»½</label>
                    <select id="month">
                        <option value="1">1æœˆ</option>
                        <option value="2">2æœˆ</option>
                        <option value="3">3æœˆ</option>
                        <option value="4">4æœˆ</option>
                        <option value="5">5æœˆ</option>
                        <option value="6">6æœˆ</option>
                        <option value="7">7æœˆ</option>
                        <option value="8">8æœˆ</option>
                        <option value="9">9æœˆ</option>
                        <option value="10">10æœˆ</option>
                        <option value="11">11æœˆ</option>
                        <option value="12">12æœˆ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ğŸ“† å‡ºç”Ÿæ—¥æœŸ</label>
                    <select id="day">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>

                <div class="form-group">
                    <label>ğŸ• å‡ºç”Ÿæ—¶è¾°</label>
                    <select id="hour">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>

                <div class="form-group">
                    <label>ğŸ‘¤ æ€§åˆ«</label>
                    <select id="gender">
                        <option value="male">ç”·</option>
                        <option value="female">å¥³</option>
                    </select>
                </div>

                <button onclick="calculateFortune()">ğŸ”® å¼€å§‹ç®—å‘½</button>
            </div>

            <!-- ç»“æœé¢æ¿ -->
            <div id="resultContainer" class="result-hidden">
                <!-- å…«å­—ä¿¡æ¯ -->
                <div class="result-card">
                    <h3>ğŸ“Š ä½ çš„å…«å­—</h3>
                    <div class="bazi-display" id="baziDisplay"></div>
                </div>

                <!-- äº”è¡Œåˆ†å¸ƒ -->
                <div class="result-card">
                    <h3>ğŸŒŠ äº”è¡Œåˆ†å¸ƒ</h3>
                    <div class="wuxing-grid" id="wuxingGrid"></div>
                </div>

                <!-- æ ‡ç­¾é¡µ -->
                <div class="result-card">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab(event, 'fortune')">è¿åŠ¿æŒ‡æ•°</button>
                        <button class="tab-btn" onclick="switchTab(event, 'analysis')">è¯¦ç»†åˆ†æ</button>
                        <button class="tab-btn" onclick="switchTab(event, 'advice')">æ”¹è¿å»ºè®®</button>
                    </div>

                    <!-- è¿åŠ¿æŒ‡æ•°é¢æ¿ -->
                    <div id="fortune" class="tab-content active">
                        <div class="fortune-bar-container">
                            <div class="fortune-bar-label">
                                <span>ç»¼åˆè¿åŠ¿</span>
                                <span id="overallValue">--</span>
                            </div>
                            <div class="fortune-bar">
                                <div class="fortune-bar-fill" id="overallBar" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="fortune-bar-container">
                            <div class="fortune-bar-label">
                                <span>è´¢è¿</span>
                                <span id="wealthValue">--</span>
                            </div>
                            <div class="fortune-bar">
                                <div class="fortune-bar-fill" id="wealthBar" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="fortune-bar-container">
                            <div class="fortune-bar-label">
                                <span>äº‹ä¸šè¿</span>
                                <span id="careerValue">--</span>
                            </div>
                            <div class="fortune-bar">
                                <div class="fortune-bar-fill" id="careerBar" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="fortune-bar-container">
                            <div class="fortune-bar-label">
                                <span>çˆ±æƒ…è¿</span>
                                <span id="loveValue">--</span>
                            </div>
                            <div class="fortune-bar">
                                <div class="fortune-bar-fill" id="loveBar" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="fortune-bar-container">
                            <div class="fortune-bar-label">
                                <span>å¥åº·è¿</span>
                                <span id="healthValue">--</span>
                            </div>
                            <div class="fortune-bar">
                                <div class="fortune-bar-fill" id="healthBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- è¯¦ç»†åˆ†æé¢æ¿ -->
                    <div id="analysis" class="tab-content">
                        <div class="stat-item">
                            <span class="stat-label">å¹´é¾„</span>
                            <span class="stat-value" id="ageValue">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">æ—¥ä¸»</span>
                            <span class="stat-value" id="dayMasterValue">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">æ—¥ä¸»äº”è¡Œ</span>
                            <span class="stat-value" id="dayMasterWuXingValue">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">æ—¥ä¸»å¼ºå¼±</span>
                            <span class="stat-value" id="dayMasterStrengthValue">--</span>
                        </div>
                        <div style="margin-top: 20px;">
                            <p style="margin-bottom: 15px; color: #555; line-height: 1.8;" id="analysisText"></p>
                        </div>
                    </div>

                    <!-- æ”¹è¿å»ºè®® -->
                    <div id="advice" class="tab-content">
                        <div class="analysis-text" id="adviceText"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
        function initializeSelects() {
            const daySelect = document.getElementById('day');
            const hourSelect = document.getElementById('hour');

            // ç”Ÿæˆæ—¥æœŸ
            for (let i = 1; i <= 31; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æ—¥';
                daySelect.appendChild(option);
            }

            // ç”Ÿæˆæ—¶è¾°
            for (let i = 0; i < 24; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + ':00';
                hourSelect.appendChild(option);
            }
        }

        // å…«å­—è®¡ç®—å¼•æ“
        class FortuneEngine {
            constructor() {
                this.heavenStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
                this.earthBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
                
                this.stemWuXing = {
                    'ç”²': 'æœ¨', 'ä¹™': 'æœ¨', 'ä¸™': 'ç«', 'ä¸': 'ç«', 'æˆŠ': 'åœŸ', 'å·±': 'åœŸ',
                    'åºš': 'é‡‘', 'è¾›': 'é‡‘', 'å£¬': 'æ°´', 'ç™¸': 'æ°´'
                };
                
                this.branchWuXing = {
                    'å­': 'æ°´', 'ä¸‘': 'åœŸ', 'å¯…': 'æœ¨', 'å¯': 'æœ¨', 'è¾°': 'åœŸ', 'å·³': 'ç«',
                    'åˆ': 'ç«', 'æœª': 'åœŸ', 'ç”³': 'é‡‘', 'é…‰': 'é‡‘', 'æˆŒ': 'åœŸ', 'äº¥': 'æ°´'
                };
            }

            yearToGanZhi(year) {
                const stemIndex = (year - 4) % 10;
                const branchIndex = (year - 4) % 12;
                return this.heavenStems[stemIndex] + this.earthBranches[branchIndex];
            }

            monthToGanZhi(year, month) {
                const yearGanZhi = this.yearToGanZhi(year);
                const yearStemIndex = this.heavenStems.indexOf(yearGanZhi[0]);
                const monthStemIndex = (yearStemIndex * 2 + month - 1) % 10;
                const monthBranchIndex = (month - 1) % 12;
                return this.heavenStems[monthStemIndex] + this.earthBranches[monthBranchIndex];
            }

            dayToGanZhi(year, month, day) {
                const baseDate = new Date(1900, 0, 1);
                const currentDate = new Date(year, month - 1, day);
                const days = Math.floor((currentDate - baseDate) / (24 * 60 * 60 * 1000));
                const stemIndex = days % 10;
                const branchIndex = days % 12;
                return this.heavenStems[stemIndex] + this.earthBranches[branchIndex];
            }

            hourToGanZhi(dayGanZhi, hour) {
                const dayHourIndex = this.heavenStems.indexOf(dayGanZhi[0]) * 2;
                let hourBranchIndex = 0;
                if (hour >= 23 || hour < 1) hourBranchIndex = 0;
                else if (hour >= 1 && hour < 3) hourBranchIndex = 1;
                else if (hour >= 3 && hour < 5) hourBranchIndex = 2;
                else if (hour >= 5 && hour < 7) hourBranchIndex = 3;
                else if (hour >= 7 && hour < 9) hourBranchIndex = 4;
                else if (hour >= 9 && hour < 11) hourBranchIndex = 5;
                else if (hour >= 11 && hour < 13) hourBranchIndex = 6;
                else if (hour >= 13 && hour < 15) hourBranchIndex = 7;
                else if (hour >= 15 && hour < 17) hourBranchIndex = 8;
                else if (hour >= 17 && hour < 19) hourBranchIndex = 9;
                else if (hour >= 19 && hour < 21) hourBranchIndex = 10;
                else hourBranchIndex = 11;
                const hourStemIndex = (dayHourIndex + hourBranchIndex) % 10;
                return this.heavenStems[hourStemIndex] + this.earthBranches[hourBranchIndex];
            }

            getBaZi(year, month, day, hour) {
                const yearGanZhi = this.yearToGanZhi(year);
                const monthGanZhi = this.monthToGanZhi(year, month);
                const dayGanZhi = this.dayToGanZhi(year, month, day);
                const hourGanZhi = this.hourToGanZhi(dayGanZhi, hour);
                return {
                    year: yearGanZhi,
                    month: monthGanZhi,
                    day: dayGanZhi,
                    hour: hourGanZhi,
                    full: `${yearGanZhi} ${monthGanZhi} ${dayGanZhi} ${hourGanZhi}`
                };
            }

            getWuXingCount(baZi) {
                const allChars = (baZi.year + baZi.month + baZi.day + baZi.hour).split('');
                const wuXingCount = { 'æœ¨': 0, 'ç«': 0, 'åœŸ': 0, 'é‡‘': 0, 'æ°´': 0 };
                allChars.forEach(char => {
                    if (this.stemWuXing[char]) wuXingCount[this.stemWuXing[char]]++;
                    if (this.branchWuXing[char]) wuXingCount[this.branchWuXing[char]]++;
                });
                return wuXingCount;
            }

            calculateDayMasterStrength(baZi) {
                const dayMaster = baZi.day[0];
                const wuXing = this.stemWuXing[dayMaster];
                const yearGan = baZi.year[0];
                const monthGan = baZi.month[0];
                const hourGan = baZi.hour[0];
                const yearZhi = baZi.year[1];
                const monthZhi = baZi.month[1];
                const dayZhi = baZi.day[1];
                const hourZhi = baZi.hour[1];
                let strength = 50;
                if (this.stemWuXing[yearGan] === wuXing) strength += 15;
                if (this.stemWuXing[monthGan] === wuXing) strength += 20;
                if (this.stemWuXing[baZi.day[0]] === wuXing) strength += 30;
                if (this.stemWuXing[hourGan] === wuXing) strength += 15;
                if (this.branchWuXing[yearZhi] === wuXing) strength += 10;
                if (this.branchWuXing[monthZhi] === wuXing) strength += 15;
                if (this.branchWuXing[dayZhi] === wuXing) strength += 20;
                if (this.branchWuXing[hourZhi] === wuXing) strength += 10;
                return Math.min(Math.round(strength), 100);
            }

            generateFortune(year, month, day, hour, gender) {
                const baZi = this.getBaZi(year, month, day, hour);
                const wuXingCount = this.getWuXingCount(baZi);
                const dayMasterStrength = this.calculateDayMasterStrength(baZi);
                const dayMasterWuXing = this.stemWuXing[baZi.day[0]];
                const today = new Date();
                const currentYear = today.getFullYear();
                const currentMonth = today.getMonth() + 1;
                const currentDay = today.getDate();
                let age = currentYear - year;
                if (currentMonth < month || (currentMonth === month && currentDay < day)) age--;

                const fortuneIndices = this.calculateFortuneIndices(baZi, wuXingCount, dayMasterStrength, age);
                return { baZi, wuXingCount, dayMasterStrength, dayMasterWuXing, age, gender, fortuneIndices };
            }

            calculateFortuneIndices(baZi, wuXingCount, dayMasterStrength, age) {
                const baseScore = dayMasterStrength;
                const maxWuXing = Math.max(...Object.values(wuXingCount));
                const minWuXing = Math.min(...Object.values(wuXingCount));
                const balance = maxWuXing === 0 ? 50 : Math.round((1 - (maxWuXing - minWuXing) / 8) * 100);
                const daYunCycle = Math.floor(age / 10);
                const daYunFortune = (baseScore + (daYunCycle * 5)) % 100;
                const xiaYunFortune = (baseScore + (age % 12) * 8) % 100;

                return {
                    overall: Math.round((dayMasterStrength + balance) / 2),
                    wealth: Math.min(Math.round((wuXingCount['ç«'] + wuXingCount['æœ¨']) * 6), 100),
                    career: Math.round(balance * 0.9),
                    love: Math.round(balance * 0.8),
                    health: dayMasterStrength,
                    balance: balance,
                    daYun: Math.round(daYunFortune * 0.7),
                    xiaYun: Math.round(xiaYunFortune * 0.8)
                };
            }
        }

        const engine = new FortuneEngine();

        function calculateFortune() {
            const year = parseInt(document.getElementById('year').value);
            const month = parseInt(document.getElementById('month').value);
            const day = parseInt(document.getElementById('day').value);
            const hour = parseInt(document.getElementById('hour').value);
            const gender = document.getElementById('gender').value;

            const fortune = engine.generateFortune(year, month, day, hour, gender);

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultContainer').classList.remove('result-hidden');

            // å…«å­—æ˜¾ç¤º
            document.getElementById('baziDisplay').innerHTML = `
                <div>å¹´: ${fortune.baZi.year}</div>
                <div>æœˆ: ${fortune.baZi.month}</div>
                <div>æ—¥: ${fortune.baZi.day}</div>
                <div>æ—¶: ${fortune.baZi.hour}</div>
            `;

            // äº”è¡Œåˆ†å¸ƒ
            const wuXingHtml = ['æœ¨', 'ç«', 'åœŸ', 'é‡‘', 'æ°´'].map(w => `
                <div class="wuxing-item wuxing-${w === 'æœ¨' ? 'wood' : w === 'ç«' ? 'fire' : w === 'åœŸ' ? 'earth' : w === 'é‡‘' ? 'metal' : 'water'}">
                    <div>${w}</div>
                    <div class="wuxing-count">${fortune.wuXingCount[w]}</div>
                </div>
            `).join('');
            document.getElementById('wuxingGrid').innerHTML = wuXingHtml;

            // è¿åŠ¿æŒ‡æ•°
            const indices = fortune.fortuneIndices;
            document.getElementById('overallValue').textContent = indices.overall + '%';
            document.getElementById('overallBar').style.width = indices.overall + '%';
            document.getElementById('wealthValue').textContent = indices.wealth + '%';
            document.getElementById('wealthBar').style.width = indices.wealth + '%';
            document.getElementById('careerValue').textContent = indices.career + '%';
            document.getElementById('careerBar').style.width = indices.career + '%';
            document.getElementById('loveValue').textContent = indices.love + '%';
            document.getElementById('loveBar').style.width = indices.love + '%';
            document.getElementById('healthValue').textContent = indices.health + '%';
            document.getElementById('healthBar').style.width = indices.health + '%';

            // è¯¦ç»†åˆ†æ
            document.getElementById('ageValue').textContent = fortune.age + 'å²';
            document.getElementById('dayMasterValue').textContent = fortune.baZi.day;
            document.getElementById('dayMasterWuXingValue').textContent = fortune.dayMasterWuXing;
            document.getElementById('dayMasterStrengthValue').textContent = fortune.dayMasterStrength + 'åˆ†';

            const analysisText = `ä½ çš„å…«å­—ä¸ºï¼š${fortune.baZi.full}<br><br>` +
                `æ—¥ä¸»ï¼ˆæ—¥å¹²ï¼‰ä¸º${fortune.baZi.day[0]}ï¼Œå±${fortune.dayMasterWuXing}æ€§ã€‚<br><br>` +
                (fortune.dayMasterStrength > 70 ? 
                    `æ—¥ä¸»éå¸¸æ—ºç››ï¼ˆå¼ºåº¦${fortune.dayMasterStrength}åˆ†ï¼‰ï¼Œè¯´æ˜ä½ å¤©ç”Ÿè‡ªä¿¡ã€è¡ŒåŠ¨åŠ›å¼ºã€ä¸»è§åšå®šã€‚ä½ æ˜¯å¤©ç”Ÿçš„é¢†å¯¼è€…ï¼Œå…·æœ‰å¾ˆå¼ºçš„è‡ªæˆ‘ç®¡ç†èƒ½åŠ›å’Œæ‰§è¡ŒåŠ›ã€‚` :
                fortune.dayMasterStrength > 55 ?
                    `æ—¥ä¸»ç›¸å¯¹æ—ºç››ï¼ˆå¼ºåº¦${fortune.dayMasterStrength}åˆ†ï¼‰ï¼Œè¯´æ˜ä½ å…·æœ‰è‰¯å¥½çš„è‡ªæˆ‘ç®¡ç†èƒ½åŠ›ã€‚ä½ èƒ½å¤Ÿå¹³è¡¡å·¥ä½œå’Œç”Ÿæ´»ï¼Œå…·æœ‰å¥å…¨çš„äººæ ¼å’Œç¨³å®šçš„å¿ƒæ€ã€‚` :
                fortune.dayMasterStrength > 40 ?
                    `æ—¥ä¸»ä¸­ç­‰å¼ºåº¦ï¼ˆå¼ºåº¦${fortune.dayMasterStrength}åˆ†ï¼‰ï¼Œè¯´æ˜ä½ æ€§æ ¼æ¸©å’Œï¼Œå®¹æ˜“é€‚åº”ç¯å¢ƒã€‚ä½ éœ€è¦ä¾é ä»–äººçš„å¸®åŠ©å’Œæ”¯æŒï¼Œä½†åŒæ—¶å…·æœ‰è‰¯å¥½çš„åˆä½œç²¾ç¥ã€‚` :
                    `æ—¥ä¸»ç›¸å¯¹åå¼±ï¼ˆå¼ºåº¦${fortune.dayMasterStrength}åˆ†ï¼‰ï¼Œè¯´æ˜ä½ éœ€è¦å€ŸåŠ©ä»–äººçš„åŠ›é‡æ¥å®ç°ç›®æ ‡ã€‚ä½ åº”è¯¥æ›´å¤šåœ°å¯»æ±‚è´µäººç›¸åŠ©ï¼Œå»ºç«‹è‰¯å¥½çš„äººé™…å…³ç³»ç½‘ç»œã€‚`);

            document.getElementById('analysisText').innerHTML = analysisText;

            // æ”¹è¿å»ºè®®
            const adviceText = `
                <strong>1. äº”è¡Œè°ƒç†</strong><br>
                ç©¿ç€å®œé€‰æ‹©ä¸ä½ æ—¥ä¸»äº”è¡Œç›¸ç¬¦çš„é¢œè‰²ï¼Œæœ‰åŠ©äºå¢å¼ºè¿åŠ¿ã€‚<br>
                åœ¨åŠå…¬æ¡Œå’Œå§å®¤æ‘†æ”¾ç›¸åº”äº”è¡Œå…ƒç´ çš„è£…é¥°å“ï¼ŒæŒç»­è°ƒç†ã€‚<br><br>
                
                <strong>2. æ–¹ä½è°ƒç†</strong><br>
                æ ¹æ®æ—¥ä¸»äº”è¡Œå±æ€§é€‰æ‹©åˆé€‚çš„å±…ä½å’Œå·¥ä½œæ–¹ä½ã€‚<br>
                æ—¥å¸¸æ´»åŠ¨å’Œé‡è¦å†³ç­–å¯ä»¥å‘å‰åˆ©æ–¹ä½è¿›è¡Œã€‚<br><br>
                
                <strong>3. ä¹ æƒ¯è°ƒç†</strong><br>
                æ—©èµ·å’Œè§„å¾‹ä½œæ¯èƒ½å¢å¼ºè¿åŠ¿ï¼Œè°ƒæ•´èº«ä½“èƒ½é‡ã€‚<br>
                å®šæœŸè¿åŠ¨å’Œå†¥æƒ³èƒ½å¹³è¡¡äº”è¡Œï¼Œæ”¹å–„æ°”åœºã€‚<br>
                æ–½èˆå’Œè¡Œå–„èƒ½ç§¯ç´¯ç¦æŠ¥ï¼Œæ”¹å–„è´¢è¿ã€‚<br><br>
                
                <strong>4. äººé™…è°ƒç†</strong><br>
                ç»“äº¤å¿—åŒé“åˆçš„æœ‹å‹ï¼Œå»ºç«‹è‰¯å¥½çš„äººé™…å…³ç³»ã€‚<br>
                å¤šå‚åŠ ç¤¾äº¤æ´»åŠ¨ï¼Œæ‰©å±•äººè„‰å’Œæœºé‡ã€‚<br>
                å¯»æ‰¾è´µäººç›¸åŠ©æ¥æå‡è¿åŠ¿å’Œäº‹ä¸šå‘å±•ã€‚
            `;
            document.getElementById('adviceText').innerHTML = adviceText;

            // æ»šåŠ¨åˆ°ç»“æœ
            setTimeout(() => {
                document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function switchTab(e, tabName) {
            // ç§»é™¤æ‰€æœ‰activeç±»
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // æ·»åŠ activeç±»åˆ°ç‚¹å‡»çš„å…ƒç´ 
            e.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // åˆå§‹åŒ–
        initializeSelects();
    </script>
</body>
</html>